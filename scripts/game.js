!function(){function e(t,i,n){function r(a,l){if(!i[a]){if(!t[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[a]={exports:{}};t[a][0].call(c.exports,function(e){var i=t[a][1][e];return r(i||e)},c,c.exports,e,t,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}return e}()({1:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("./objects/world"),l=n(a),s=e("./objects/engine/physics"),u=n(s),c=function(){function e(){r(this,e),this.container=document.getElementById("content"),this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.width=0,this.height=0,this.time=0,this.dt=0,this.physics=new u["default"],this._world=null,this._updateCallback=this.update.bind(this),this.init()}return o(e,[{key:"init",value:function(){var e=this;window.addEventListener("resize",function(t){return e.onResize()}),this.onResize(),requestAnimationFrame(this._updateCallback),this._world=new l["default"](this)}},{key:"onResize",value:function(){this.width=this.container.clientWidth,this.height=this.container.clientHeight,this.canvas.width=this.width,this.canvas.height=this.height}},{key:"update",value:function(e){this.ctx.clearRect(0,0,this.width,this.height),this.dt=e-this.time,this.time=e,this._world.update(),requestAnimationFrame(this._updateCallback)}}]),e}();new c},{"./objects/engine/physics":9,"./objects/world":19}],2:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){return Math.floor(e+Math.random()*(t-e))}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=function d(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:d(r,t,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},c=e("../engine/game-object"),h=n(c),f=e("../vector"),p=n(f),y=function(e){function t(e,i,n){r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.width=i,a.height=n,a._points=null,a._velocity=new p["default"],a._init(),a}return a(t,e),s(t,[{key:"update",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this);var e=this.core.dt/1e3;this.x+=this._velocity.x*e,this.y+=this._velocity.y*e,this._checkOutOfWorld()}},{key:"draw",value:function(){var e=this.core.ctx;e.save(),e.translate(this.x,this.y),e.beginPath(),e.lineWidth=2,e.strokeStyle="#ffffff",e.moveTo(this._points[0],this._points[1]);for(var t=2;t<this._points.length;t+=2)e.lineTo(this._points[t],this._points[t+1]);e.closePath(),e.stroke(),e.restore()}},{key:"_checkOutOfWorld",value:function(){this.x<0&&(this.x=this.core.width),this.x>this.core.width&&(this.x=0),this.y<0&&(this.y=this.core.height),this.y>this.core.height&&(this.y=0)}},{key:"_init",value:function(){this._points=this._generatePoints(),this._velocity.x=l(-200,200),this._velocity.y=l(-200,200)}},{key:"_generatePoints",value:function(){var e=this.width,t=this.height,i=[l(0,.2*e),l(0,.2*t),l(.2*e,.4*e),l(0,.2*t),l(.4*e,.6*e),l(0,.3*t),l(.6*e,.8*e),l(0,.2*t),l(.8*e,e),l(0,.2*t),l(.8*e,e),l(.2*t,.4*t),l(.7*e,e),l(.4*t,.7*t),l(.8*e,e),l(.7*t,t),l(.7*e,.8*e),l(.9*t,t),l(.5*e,.7*e),l(.8*t,t),l(.3*e,.5*e),l(.7*t,t),l(.1*e,.3*e),l(.8*t,t),l(0,.2*e),l(.5*t,.8*t),l(.05*e,.1*e),l(.4*t,.5*t),l(0,.3*e),l(.2*t,.4*t),l(.1*e,.2*e),l(.1*t,.2*t)];return i}}]),t}(h["default"]);i["default"]=y},{"../engine/game-object":8,"../vector":18}],3:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){return Math.floor(e+Math.random()*(t-e))}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e("../engine/game-object"),c=n(u),h=e("./asteroid"),f=n(h),p=e("../engine/event"),y=n(p),d=e("../pool"),_=n(d),v=function(e){function t(e){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.onBulletHits=new y["default"],i._bigPool=null,i._smallPool=null,i._activeAsteroids=[],i._init(),i}return a(t,e),s(t,[{key:"spawnBigAsteroids",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=0;t<e;t++)this._bigPool.get()}},{key:"spawnSmallAsteroids",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=l(2,4),i=0;i<t;i++){var n=this._smallPool.get();n.x=e.x,n.y=e.y}}},{key:"kill",value:function(e){"big"===e.type&&this._bigPool.kill(e),"small"===e.type&&this._smallPool.kill(e)}},{key:"_init",value:function(){this._initBitPool(),this._initSmallPool()}},{key:"_initBitPool",value:function(){var e=this,t=function(){var t=l(70,130),i=l(70,130),n=new f["default"](e.core,t,i);return n.x=0,n.y=0,n.name="asteroid",n.type="big",e.addChild(n),e.core.physics.addCollider(n.collider),n.collider.onCollide.addListener(function(t){"bullet"===t.layer&&e.onBulletHits.dispatch(n,t.parent)}),n},i=function(t){t.visible=!1,t.collider.active=!1;var i=e._activeAsteroids.indexOf(t);i>=0&&e._activeAsteroids.splice(i,1)},n=function(t){t.x=0,t.y=0,t.visible=!0,t.collider.active=!0,e._activeAsteroids.push(t)};this._bigPool=new _["default"](t,i,n),this._bigPool.prefill(10)}},{key:"_initSmallPool",value:function(){var e=this,t=function(){var t=l(20,40),i=l(20,40),n=new f["default"](e.core,t,i);return n.x=0,n.y=0,n.name="asteroid",n.type="small",e.addChild(n),e.core.physics.addCollider(n.collider),n.collider.onCollide.addListener(function(t){"bullet"===t.layer&&e.onBulletHits.dispatch(n,t.parent)}),n},i=function(t){t.visible=!1,t.collider.active=!1;var i=e._activeAsteroids.indexOf(t);i>=0&&e._activeAsteroids.splice(i,1)},n=function(t){t.x=0,t.y=0,t.visible=!0,t.collider.active=!0,e._activeAsteroids.push(t)};this._smallPool=new _["default"](t,i,n),this._smallPool.prefill(10)}},{key:"aliveCount",get:function(){return this._activeAsteroids.length}}]),t}(c["default"]);i["default"]=v},{"../engine/event":7,"../engine/game-object":8,"../pool":15,"./asteroid":2}],4:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function _(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:_(r,t,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},u=e("../engine/game-object"),c=n(u),h=e("../vector"),f=n(h),p=e("../engine/event"),y=n(p),d=function(e){function t(e){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.width=3,i.height=3,i.onOutOfWorld=new y["default"],i.velocity=800,i.direction=new f["default"],i}return a(t,e),l(t,[{key:"update",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this);var e=this.core.dt/1e3;this.x+=this.velocity*this.direction.x*e,this.y+=this.velocity*this.direction.y*e,this._checkOutOfBounds()}},{key:"draw",value:function(){var e=this.core.ctx;e.save(),e.translate(this.x,this.y),e.beginPath(),e.strokeStyle="#ffffff",e.lineWidth=2,e.arc(0,0,this.width/2,0,2*Math.PI),e.stroke(),e.closePath(),e.restore()}},{key:"_checkOutOfBounds",value:function(){this.x<0&&this.onOutOfWorld.dispatch(this),this.x>this.core.width&&this.onOutOfWorld.dispatch(this),this.y<0&&this.onOutOfWorld.dispatch(this),this.y>this.core.height&&this.onOutOfWorld.dispatch(this)}}]),t}(c["default"]);i["default"]=d},{"../engine/event":7,"../engine/game-object":8,"../vector":18}],5:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../engine/game-object"),u=n(s),c=e("./bullet"),h=n(c),f=e("../pool"),p=n(f),y=function(e){function t(e,i){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._player=i,n._pool=null,n._initPool(),n}return a(t,e),l(t,[{key:"fire",value:function(){this._pool.get()}},{key:"kill",value:function(e){this._pool.kill(e)}},{key:"_initPool",value:function(){var e=this,t=function(){var t=new h["default"](e.core);return t.onOutOfWorld.addListener(e.kill,e),t.name="bullet",e.addChild(t),e.core.physics.addCollider(t.collider),t},i=function(t){var i=Math.sin(Math.PI/180*e._player.angle),n=-Math.cos(Math.PI/180*e._player.angle);t.x=e._player.x+e._player.height/2*i+e._player.width/2,t.y=e._player.y+e._player.height/2*n+e._player.height/2,t.velocity=800,t.direction.x=i,t.direction.y=n,t.visible=!0,t.collider.active=!0},n=function(t){t.velocity=0,t.x=e._player.x,t.y=e._player.y,t.visible=!1,t.collider.active=!1};this._pool=new p["default"](t,n,i)}}]),t}(u["default"]);i["default"]=y},{"../engine/game-object":8,"../pool":15,"./bullet":4}],6:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("./event"),l=n(a),s=function(){function e(t){r(this,e),this.parent=t,this.layer=t.name,this.active=!0,this.onCollide=new l["default"]}return o(e,[{key:"getBoundingBox",value:function(){return{x:this.parent.x,y:this.parent.y,width:this.parent.width,height:this.parent.height}}}]),e}();i["default"]=s},{"./event":7}],7:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(){n(this,e),this._listeners=[],this._contexts=[]}return r(e,[{key:"addListener",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._listeners.push(e),this._contexts.push(t)}},{key:"dispatch",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var n=0;n<this._listeners.length;n++){var r,o=this._contexts[n];(r=this._listeners[n]).call.apply(r,[o].concat(t))}}}]),e}();i["default"]=o},{}],8:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("./collider"),l=n(a),s=function(){function e(t){r(this,e),this.core=t,this.x=0,this.y=0,this.width=0,this.height=0,this.angle=0,this.visible=!0,this.collider=new l["default"](this),this.children=[],this._name="game-object"}return o(e,[{key:"update",value:function(){this.visible===!0&&this.draw(),this.core.physics.checkCollisions();for(var e=0;e<this.children.length;e++)this.children[e].update()}},{key:"addChild",value:function(e){this.children.push(e)}},{key:"draw",value:function(){}},{key:"name",get:function(){return this._name},set:function(e){this._name=e,this.collider.layer=e}}]),e}();i["default"]=s},{"./collider":6}],9:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(){n(this,e),this._colliders=[]}return r(e,[{key:"addCollider",value:function(e){this._colliders.push(e)}},{key:"checkCollisions",value:function(){for(var e=0;e<this._colliders.length;e++)if(this._colliders[e].active!==!1)for(var t=0;t<this._colliders.length;t++)if(this._colliders[t].active!==!1&&this._colliders[e]!==this._colliders[t]){var i=this._colliders[e],n=this._colliders[t];this._properLayersCombination(i.layer,n.layer)&&this._intersect(i.getBoundingBox(),n.getBoundingBox())&&(i.onCollide.dispatch(n),n.onCollide.dispatch(i))}}},{key:"_properLayersCombination",value:function(e,t){return"player"===e&&"asteroid"===t||"bullet"===e&&"asteroid"===t}},{key:"_intersect",value:function(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}}]),e}();i["default"]=o},{}],10:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../engine/game-object"),u=n(s),c=e("../vector"),h=n(c),f=function(e){function t(e){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.velocity=new h["default"],i.lifeDuration=400,i.life=0,i.sizeOverLife=[7,1],i.size=i.sizeOverLife[0],i}return a(t,e),l(t,[{key:"draw",value:function(){var e=this.core.ctx;e.save(),e.translate(this.x,this.y),e.beginPath(),e.strokeStyle="#ffffff",e.lineWidth=Math.min(2,Math.ceil(this.size/2)),e.arc(0,0,this.size/2,0,2*Math.PI),e.stroke(),e.closePath(),e.restore()}}]),t}(u["default"]);i["default"]=f},{"../engine/game-object":8,"../vector":18}],11:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){return Math.floor(e+Math.random()*(t-e))}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=function v(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:v(r,t,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},c=e("../engine/game-object"),h=n(c),f=e("./explosion-particle"),p=n(f),y=e("../pool"),d=n(y),_=function(e){function t(e){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._particlePool=null,i._activeParticles=[],i._init(),i}return a(t,e),s(t,[{key:"update",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this);for(var e=this.core.dt/1e3,i=0;i<this._activeParticles.length;i++){var n=this._activeParticles[i];n.x+=n.velocity.x*e,n.y+=n.velocity.y*e,n.life+=1e3*e;var r=Math.min(1,n.life/n.lifeDuration);n.size=this._lerp(n.sizeOverLife[0],n.sizeOverLife[1],r),n.life>n.lifeDuration&&this._particlePool.kill(n)}}},{key:"show",value:function(){for(var e=l(10,15),t=0;t<e;t++)this._particlePool.get()}},{key:"_init",value:function(){this._initPool()}},{key:"_initPool",value:function(){var e=this,t=function(){var t=new p["default"](e.core);return e.addChild(t),t},i=function(t){var i=e._activeParticles.indexOf(t);i>=0&&e._activeParticles.splice(i,1),t.visible=!1},n=function(t){t.x=e.x,t.y=e.y,t.velocity.x=l(-200,200),t.velocity.y=l(-200,200),t.life=0,t.visible=!0,e._activeParticles.push(t)};this._particlePool=new d["default"](t,i,n),this._particlePool.prefill(10)}},{key:"_lerp",value:function(e,t,i){return e*(1-i)+t*i}}]),t}(h["default"]);i["default"]=_},{"../engine/game-object":8,"../pool":15,"./explosion-particle":10}],12:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t,i,r,o,a,l,s){n(this,e),this._player=t,this._asteroidsGroup=i,this._bulletsGroup=r,this._explosion=o,this._scoreBoard=a,this._healthBoard=l,this._screenText=s,this._totalWaves=3,this._currentWave=1,this._score=0,this._health=3,this._init()}return r(e,[{key:"_init",value:function(){this._asteroidsGroup.spawnBigAsteroids(5),this._healthBoard.setHealth(this._health),this._initPlayerController(),this._initAsteroidsController()}},{key:"_initPlayerController",value:function(){var e=this;this._player.collider.onCollide.addListener(function(){e._killPlayer(),e._health-=1,e._healthBoard.setHealth(e._health),e._health>0?setTimeout(function(){e._spawnPlayer()},2e3):setTimeout(function(){e._screenText.setText("GAME OVER"),e._screenText.show()},1e3)}),this._player.onFire.addListener(function(){e._bulletsGroup.fire()})}},{key:"_killPlayer",value:function(){this._explosion.x=this._player.x+this._player.width/2,this._explosion.y=this._player.y+this._player.height/2,this._explosion.show(),this._player.visible=!1,this._player.collider.active=!1,this._player.inertia.x=0,this._player.inertia.y=0,this._player.acceleration=0,this._player.angularVelocity=0,this._player.isFiring=!1}},{key:"_spawnPlayer",value:function(){this._player.visible=!0,this._player.x=this._player.startPosition.x,this._player.y=this._player.startPosition.y,this._player.angle=0,this._player.collider.active=!0}},{key:"_initAsteroidsController",value:function(){var e=this;this._asteroidsGroup.onBulletHits.addListener(function(t,i){if(e._killAsteroid(t),e._bulletsGroup.kill(i),"big"===t.type){var n={x:t.x,y:t.y};e._asteroidsGroup.spawnSmallAsteroids(n),e._score+=100}else"small"===t.type&&(e._score+=50);e._scoreBoard.setText(e._score),e._checkForNoAsteroids()})}},{key:"_killAsteroid",value:function(e){this._explosion.x=e.x+e.width/2,this._explosion.y=e.y+e.height/2,this._explosion.show(),this._asteroidsGroup.kill(e)}},{key:"_checkForNoAsteroids",value:function(){if(0===this._asteroidsGroup.aliveCount)if(this._currentWave<this._totalWaves){this._currentWave+=1;var e=4*this._currentWave;this._asteroidsGroup.spawnBigAsteroids(e)}else this._screenText.setText("VICTORY"),this._screenText.show()}}]),e}();i["default"]=o},{}],13:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("./engine/game-object"),u=n(s),c=function(e){function t(e){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._health=3,i}return a(t,e),l(t,[{key:"setHealth",value:function(e){this._health=e}},{key:"draw",value:function(){var e="A".repeat(this._health),t=this.core.ctx;t.save(),t.translate(this.x,this.y),t.font="60px Tahoma",t.fillStyle="#ffffff",t.fillText(e,0,0),t.restore()}}]),t}(u["default"]);i["default"]=c},{"./engine/game-object":8}],14:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function _(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:_(r,t,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},u=e("./engine/game-object"),c=n(u),h=e("./engine/event"),f=n(h),p=e("./vector"),y=n(p),d=function(e){function t(e){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.onFire=new f["default"],i.width=20,i.height=50,i.acceleration=0,i.inertia=new y["default"],i.angularVelocity=0,i.isFiring=!1,i._maxInertia=4,i._fadeFactor=.99,i._bottomOffset=5,i._fireInterval=200,i._lastFireTime=-i._fireInterval,i._init(),i}return a(t,e),l(t,[{key:"update",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this);var e=this.core.dt/1e3;this.inertia.x+=this.acceleration*Math.sin(Math.PI/180*this.angle)*e,this.inertia.y+=-this.acceleration*Math.cos(Math.PI/180*this.angle)*e,this.inertia.magnitude>this._maxInertia&&(this.inertia.normalize(),this.inertia.multiplyScalar(this._maxInertia)),this.angle+=this.angularVelocity*e,this.x+=this.inertia.x,this.y+=this.inertia.y,this._checkOutOfWorld(),this.isFiring===!0&&this.core.time-this._lastFireTime>this._fireInterval&&this._fire(),this.inertia.multiplyScalar(this._fadeFactor)}},{key:"draw",value:function(){var e=this.core.ctx;e.save(),e.translate(this.x+this.width/2,this.y+this.height/2),e.rotate(Math.PI/180*this.angle),e.translate(-this.width/2,-this.height/2),e.beginPath(),e.lineWidth=2,e.strokeStyle="#ffffff",e.moveTo(this.width/2,0),e.lineTo(this.width,this.height),e.lineTo(this.width/2,this.height-this._bottomOffset),e.lineTo(0,this.height),e.closePath(),e.stroke(),this.acceleration>0&&(e.beginPath(),e.moveTo(this.width/2-2,this.height-this._bottomOffset),e.lineTo(this.width/2,this.height),e.lineTo(this.width/2+2,this.height-this._bottomOffset),e.closePath(),e.stroke()),e.restore()}},{key:"_checkOutOfWorld",value:function(){this.x<0&&(this.x=this.core.width),this.x>this.core.width&&(this.x=0),this.y<0&&(this.y=this.core.height),this.y>this.core.height&&(this.y=0)}},{key:"_init",value:function(){this._listenEvents()}},{key:"_listenEvents",value:function(){var e=this;window.addEventListener("keydown",function(t){return e._onKeyDown(t)}),window.addEventListener("keyup",function(t){return e._onKeyUp(t)})}},{key:"_onKeyDown",value:function(e){if(this.visible!==!1)switch(e.keyCode){case 38:this.acceleration=400;break;case 37:this.angularVelocity=-200;break;case 39:this.angularVelocity=200;break;case 32:this.isFiring=!0}}},{key:"_onKeyUp",value:function(e){if(this.visible!==!1)switch(e.keyCode){case 38:this.acceleration=0;break;case 37:this.angularVelocity=0;break;case 39:this.angularVelocity=0;break;case 32:this.isFiring=!1}}},{key:"_fire",value:function(){this._lastFireTime=this.core.time,this.onFire.dispatch()}}]),t}(c["default"]);i["default"]=d},{"./engine/event":7,"./engine/game-object":8,"./vector":18}],15:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(this,e),this._objCreator=t,this._objKiller=i,this._objResetter=r,this._items=[]}return r(e,[{key:"get",value:function(){var e=this._items.pop();return e?(this._objResetter&&this._objResetter(e),e):(e=this._objCreator(),this._objResetter&&this._objResetter(e),e)}},{key:"kill",value:function(e){this._items.push(e),this._objKiller(e)}},{key:"prefill",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=0;t<e;t++){var i=this._objCreator();this.kill(i)}}}]),e}();i["default"]=o},{}],16:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("./engine/game-object"),u=n(s),c=function(e){function t(e){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._text="0",i}return a(t,e),l(t,[{key:"setText",value:function(e){this._text=e}},{key:"draw",value:function(){var e=this.core.ctx;e.save(),e.translate(this.x,this.y),e.font="60px Tahoma",e.fillStyle="#ffffff",e.fillText(this._text,0,0),e.restore()}}]),t}(u["default"]);i["default"]=c},{"./engine/game-object":8}],17:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var l=function(){function e(e,t){for(var i=0;i<t.length;i++){
var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("./engine/game-object"),u=n(s),c=function(e){function t(e){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.visible=!1,i._text="123213",i}return a(t,e),l(t,[{key:"show",value:function(){this.visible=!0}},{key:"setText",value:function(e){this._text=e}},{key:"draw",value:function(){var e=this.core.ctx;e.save(),e.translate(this.x,this.y),e.font="130px Tahoma",e.textAlign="center",e.fillStyle="#ffffff",e.fillText(this._text,0,0),e.restore()}}]),t}(u["default"]);i["default"]=c},{"./engine/game-object":8}],18:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,e),this.x=t,this.y=i}return r(e,[{key:"normalize",value:function(){var e=this.magnitude;0!==e&&(this.x/=e,this.y/=e)}},{key:"multiplyScalar",value:function(e){this.x*=e,this.y*=e}},{key:"magnitude",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}}]),e}();i["default"]=o},{}],19:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("./engine/game-object"),u=n(s),c=e("./asteroids-group/asteroids-group"),h=n(c),f=e("./player"),p=n(f),y=e("./explosion/explosion"),d=n(y),_=e("./bullets-group/bullets-group"),v=n(_),b=e("./game-controller"),g=n(b),w=e("./score-board"),O=n(w),m=e("./health-board"),x=n(m),k=e("./vector"),P=n(k),j=e("./screen-text"),T=n(j),C=function(e){function t(e){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._player=null,i._asteroidsGroup=null,i._explosion=null,i._scoreBoard=null,i._healthBoard=null,i._screenText=null,i._controller=null,i._init(),i}return a(t,e),l(t,[{key:"draw",value:function(){this._drawBg()}},{key:"_drawBg",value:function(){var e=this.core.ctx;e.beginPath(),e.fillStyle="#000000",e.fillRect(0,0,this.core.width,this.core.height),e.closePath()}},{key:"_init",value:function(){this._initPlayer(),this._initAsteroids(),this._initBullets(),this._initExplosion(),this._initScoreBoard(),this._initHealthBoard(),this._initScreenText(),this._initGameController()}},{key:"_initPlayer",value:function(){var e=this._player=new p["default"](this.core);e.x=this.core.width/2,e.y=this.core.height/2,e.startPosition=new P["default"](e.x,e.y),e.name="player",this.addChild(this._player),this.core.physics.addCollider(e.collider)}},{key:"_initAsteroids",value:function(){this._asteroidsGroup=new h["default"](this.core),this.addChild(this._asteroidsGroup)}},{key:"_initBullets",value:function(){this._bulletsGroup=new v["default"](this.core,this._player),this.addChild(this._bulletsGroup)}},{key:"_initExplosion",value:function(){this._explosion=new d["default"](this.core),this.addChild(this._explosion)}},{key:"_initScoreBoard",value:function(){var e=this._scoreBoard=new O["default"](this.core);e.x=60,e.y=100,this.addChild(this._scoreBoard)}},{key:"_initHealthBoard",value:function(){var e=this._healthBoard=new x["default"](this.core);e.x=60,e.y=180,this.addChild(this._healthBoard)}},{key:"_initScreenText",value:function(){var e=this._screenText=new T["default"](this.core);e.x=this.core.width/2,e.y=this.core.height/2+10,this.addChild(this._screenText)}},{key:"_initGameController",value:function(){this._controller=new g["default"](this._player,this._asteroidsGroup,this._bulletsGroup,this._explosion,this._scoreBoard,this._healthBoard,this._screenText)}}]),t}(u["default"]);i["default"]=C},{"./asteroids-group/asteroids-group":3,"./bullets-group/bullets-group":5,"./engine/game-object":8,"./explosion/explosion":11,"./game-controller":12,"./health-board":13,"./player":14,"./score-board":16,"./screen-text":17,"./vector":18}]},{},[1]);